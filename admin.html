<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBLIVION ADMIN CONSOLE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --neon-blue: #00f0ff;
            --neon-purple: #bd00ff;
            --neon-red: #ff3366;
            --neon-green: #00ff88;
            --neon-yellow: #fff000;
            --dark-bg: #0a0a12;
            --darker-bg: #050508;
            --terminal-text: #00ff41;
            --terminal-bg: rgba(10, 10, 18, 0.95);
            --grid-line: rgba(0, 240, 255, 0.05);
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            background-color: var(--dark-bg);
            color: var(--terminal-text);
            background-image: 
                linear-gradient(var(--terminal-bg), var(--terminal-bg)),
                url('https://files.catbox.moe/5ydrgs.jpeg'),
                linear-gradient(var(--grid-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
            background-size: cover, cover, 20px 20px, 20px 20px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .console-effect {
            text-shadow: 0 0 5px var(--terminal-text);
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            border-left: 1px solid rgba(0, 240, 255, 0.1);
            border-right: 1px solid rgba(0, 240, 255, 0.1);
            min-height: 100vh;
            position: relative;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--neon-blue);
            position: relative;
        }

        .admin-header::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .admin-title {
            font-size: 28px;
            margin: 0;
            position: relative;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
            font-weight: 700;
        }

        .admin-title::before {
            content: '> ';
            color: var(--neon-green);
        }

        .admin-title::after {
            content: '_';
            animation: blink 1s infinite;
            color: var(--neon-green);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .logout-btn {
            background: transparent;
            border: 1px solid var(--neon-red);
            color: var(--neon-red);
            padding: 8px 15px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .logout-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 51, 102, 0.4), transparent);
            transition: all 0.5s;
        }

        .logout-btn:hover {
            background: var(--neon-red);
            color: white;
            box-shadow: 0 0 10px var(--neon-red);
        }

        .logout-btn:hover::before {
            left: 100%;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(5, 5, 8, 0.7);
            border: 1px solid var(--neon-blue);
            border-radius: 3px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 240, 255, 0.05);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 240, 255, 0.3);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .stat-card h3 {
            margin-top: 0;
            color: var(--neon-purple);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--neon-blue);
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-desc {
            font-size: 12px;
            color: rgba(0, 240, 255, 0.7);
        }

        .stat-trend {
            font-size: 12px;
            margin-left: 5px;
        }

        .trend-up {
            color: var(--neon-green);
        }

        .trend-down {
            color: var(--neon-red);
        }

        .trend-neutral {
            color: var(--neon-yellow);
        }

        .control-panel {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-bar {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 15px 12px 35px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-blue);
            color: var(--terminal-text);
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--neon-purple);
            box-shadow: 0 0 10px rgba(189, 0, 255, 0.3);
        }

        .search-bar::before {
            content: 'âŒ•';
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--neon-blue);
            font-size: 16px;
        }

        .action-btn {
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 0 15px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            min-height: 40px;
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.4), transparent);
            transition: all 0.5s;
        }

        .action-btn:hover {
            background: var(--neon-blue);
            color: var(--dark-bg);
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .users-table-container {
            overflow-x: auto;
            background: rgba(5, 5, 8, 0.5);
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.1);
            margin-bottom: 30px;
            border-radius: 3px;
            position: relative;
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .users-table th {
            background: rgba(0, 240, 255, 0.1);
            color: var(--neon-blue);
            padding: 15px;
            text-align: left;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
            position: sticky;
            top: 0;
            white-space: nowrap;
            border-bottom: 1px solid var(--neon-blue);
        }

        .users-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.1);
            vertical-align: middle;
        }

        .users-table tr:last-child td {
            border-bottom: none;
        }

        .users-table tr:hover {
            background: rgba(0, 240, 255, 0.05);
        }

        .status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-connected {
            background: var(--neon-green);
            box-shadow: 0 0 5px var(--neon-green);
        }

        .status-disconnected {
            background: var(--neon-red);
        }

        .status-pending {
            background: var(--neon-yellow);
        }

        .coin-control {
            display: flex;
            align-items: center;
            gap: 5px;
            flex-wrap: wrap;
        }

        .coin-input {
            width: 80px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-blue);
            color: var(--terminal-text);
            padding: 8px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .coin-input:focus {
            outline: none;
            border-color: var(--neon-purple);
            box-shadow: 0 0 5px rgba(189, 0, 255, 0.3);
        }

        .action-icon-btn {
            background: transparent;
            border: 1px solid;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 3px;
            position: relative;
            overflow: hidden;
        }

        .action-icon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s;
        }

        .action-icon-btn:hover::before {
            left: 100%;
        }

        .give-btn {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .give-btn:hover {
            background: var(--neon-green);
            color: var(--dark-bg);
        }

        .take-btn {
            border-color: var(--neon-yellow);
            color: var(--neon-yellow);
        }

        .take-btn:hover {
            background: var(--neon-yellow);
            color: var(--dark-bg);
        }

        .reset-btn {
            border-color: var(--neon-red);
            color: var(--neon-red);
        }

        .reset-btn:hover {
            background: var(--neon-red);
            color: white;
        }

        .bot-btn {
            border-color: var(--neon-purple);
            color: var(--neon-purple);
        }

        .bot-btn:hover {
            background: var(--neon-purple);
            color: white;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        .glow {
            text-shadow: 0 0 5px currentColor;
        }

        /* Terminal-like scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 240, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neon-blue);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--neon-purple);
        }

        /* Alert system */
        .alert-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .alert {
            padding: 15px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 300px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .alert::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: currentColor;
            opacity: 0.3;
        }

        .alert.show {
            opacity: 1;
            transform: translateX(0);
        }

        .alert.success {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
        }

        .alert.error {
            background: rgba(255, 51, 102, 0.1);
            border: 1px solid var(--neon-red);
            color: var(--neon-red);
        }

        .alert.warning {
            background: rgba(255, 240, 0, 0.1);
            border: 1px solid var(--neon-yellow);
            color: var(--neon-yellow);
        }

        .alert.info {
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
        }

        /* Tabs */
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.2);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--neon-blue);
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .tab.active {
            color: var(--neon-blue);
        }

        .tab.active::after {
            transform: scaleX(1);
        }

        .tab:hover:not(.active) {
            background: rgba(0, 240, 255, 0.05);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--darker-bg);
            border: 1px solid var(--neon-blue);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 240, 255, 0.2);
            animation: modalAppear 0.3s ease-out;
        }

        @keyframes modalAppear {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.3);
        }

        .modal-title {
            margin: 0;
            color: var(--neon-blue);
            font-size: 20px;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: var(--neon-red);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--neon-blue);
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-blue);
            color: var(--terminal-text);
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--neon-purple);
            box-shadow: 0 0 10px rgba(189, 0, 255, 0.3);
        }

        .form-select {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-blue);
            color: var(--terminal-text);
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--neon-purple);
            box-shadow: 0 0 10px rgba(189, 0, 255, 0.3);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 240, 255, 0.3);
        }

        .modal-btn {
            padding: 10px 20px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid;
            background: transparent;
        }

        .modal-btn-primary {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .modal-btn-primary:hover {
            background: var(--neon-green);
            color: var(--dark-bg);
        }

        .modal-btn-secondary {
            border-color: var(--neon-blue);
            color: var(--neon-blue);
        }

        .modal-btn-secondary:hover {
            background: var(--neon-blue);
            color: var(--dark-bg);
        }

        .modal-btn-danger {
            border-color: var(--neon-red);
            color: var(--neon-red);
        }

        .modal-btn-danger:hover {
            background: var(--neon-red);
            color: white;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 240, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--neon-blue);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Connection status */
        .connection-status {
            position: fixed;
            bottom: 10px;
            left: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: var(--neon-green);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 3px;
            z-index: 100;
        }

        .connection-status.offline {
            color: var(--neon-red);
        }

        .connection-status .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--neon-green);
            box-shadow: 0 0 5px var(--neon-green);
        }

        .connection-status.offline .status-dot {
            background: var(--neon-red);
            box-shadow: 0 0 5px var(--neon-red);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .admin-container {
                padding: 10px;
            }
            
            .admin-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .control-panel {
                flex-direction: column;
            }
            
            .search-bar {
                min-width: 100%;
            }
            
            .stat-card {
                min-width: 100%;
            }
            
            .tab-container {
                overflow-x: auto;
                padding-bottom: 5px;
            }
            
            .tab {
                white-space: nowrap;
            }
        }

        /* Terminal effect */
        .terminal-line {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid var(--neon-blue);
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--terminal-text);
            z-index: 100;
        }

        .terminal-line::before {
            content: '> ';
            color: var(--neon-green);
        }

        .terminal-line::after {
            content: '_';
            animation: blink 1s infinite;
            color: var(--neon-green);
            margin-left: 5px;
        }

        /* Session timer */
        .session-timer {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            color: var(--neon-blue);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 3px;
            z-index: 100;
        }

        /* User detail modal */
        .user-details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .user-detail-item {
            margin-bottom: 10px;
        }

        .user-detail-label {
            font-size: 12px;
            color: var(--neon-blue);
            margin-bottom: 5px;
        }

        .user-detail-value {
            font-size: 14px;
            word-break: break-all;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 240, 255, 0.2);
            border-radius: 3px;
        }

        /* Chart container */
        .chart-container {
            height: 200px;
            margin-bottom: 20px;
            position: relative;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
        }

        .page-btn {
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 5px 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .page-btn.active {
            background: var(--neon-blue);
            color: var(--dark-bg);
        }

        .page-btn:hover:not(.active) {
            background: rgba(0, 240, 255, 0.2);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1 class="admin-title console-effect">OBLIVION ADMIN CONSOLE v2.5.7</h1>
            <div>
                <span id="current-time" style="margin-right: 20px; color: var(--neon-purple);"></span>
                <button class="logout-btn glow" onclick="logout()">
                    <i class="fas fa-power-off"></i> Terminate Session
                </button>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab active glow" onclick="switchTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </div>
            <div class="tab glow" onclick="switchTab('users')">
                <i class="fas fa-users"></i> User Management
            </div>
            <div class="tab glow" onclick="switchTab('logs')">
                <i class="fas fa-clipboard-list"></i> Activity Logs
            </div>
            <div class="tab glow" onclick="switchTab('settings')">
                <i class="fas fa-cog"></i> System Settings
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content">
            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3><i class="fas fa-users"></i> Total Users</h3>
                    <div class="stat-value glow" id="total-users">0</div>
                    <div class="stat-trend trend-up" id="user-trend"><i class="fas fa-caret-up"></i> 2.5%</div>
                    <div class="stat-desc">Registered in system</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-bolt"></i> Active Today</h3>
                    <div class="stat-value glow" id="active-today">0</div>
                    <div class="stat-trend trend-down" id="active-trend"><i class="fas fa-caret-down"></i> 1.2%</div>
                    <div class="stat-desc">Currently connected</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-robot"></i> Bot Connections</h3>
                    <div class="stat-value glow" id="bot-connections">0</div>
                    <div class="stat-trend trend-up" id="bot-trend"><i class="fas fa-caret-up"></i> 5.7%</div>
                    <div class="stat-desc">Active API links</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-coins"></i> Total Coins</h3>
                    <div class="stat-value glow" id="total-coins">0</div>
                    <div class="stat-trend trend-neutral" id="coin-trend"><i class="fas fa-equals"></i> 0.0%</div>
                    <div class="stat-desc">In circulation</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-user-plus"></i> New Today</h3>
                    <div class="stat-value glow" id="new-today">0</div>
                    <div class="stat-trend trend-up" id="new-trend"><i class="fas fa-caret-up"></i> 3.1%</div>
                    <div class="stat-desc">New registrations</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-exchange-alt"></i> Transactions</h3>
                    <div class="stat-value glow" id="total-tx">0</div>
                    <div class="stat-trend trend-up" id="tx-trend"><i class="fas fa-caret-up"></i> 7.8%</div>
                    <div class="stat-desc">Last 24 hours</div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="activity-chart"></canvas>
            </div>

            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3><i class="fas fa-server"></i> System Status</h3>
                    <div class="stat-value glow" id="system-status">ONLINE</div>
                    <div class="stat-desc" id="system-load">Load: 0.2 | 0.1 | 0.1</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-shield-alt"></i> Security Level</h3>
                    <div class="stat-value glow" id="security-level">MAXIMUM</div>
                    <div class="stat-desc" id="last-scan">Last scan: 2 min ago</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-database"></i> Database</h3>
                    <div class="stat-value glow" id="db-size">12.7GB</div>
                    <div class="stat-desc" id="db-uptime">Uptime: 14d 6h</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-network-wired"></i> Network</h3>
                    <div class="stat-value glow" id="network-status">STABLE</div>
                    <div class="stat-desc" id="network-latency">Latency: 23ms</div>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content" style="display: none;">
            <div class="control-panel">
                <div class="search-bar">
                    <input type="text" id="user-search" placeholder="Scan for users..." autocomplete="off">
                </div>
                <button class="action-btn glow" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="action-btn glow" onclick="exportData()">
                    <i class="fas fa-file-export"></i> Export
                </button>
                <button class="action-btn glow" onclick="showAddUserModal()">
                    <i class="fas fa-user-plus"></i> Add User
                </button>
                <button class="action-btn glow" onclick="showBulkActionsModal()">
                    <i class="fas fa-users-cog"></i> Bulk Actions
                </button>
            </div>

            <div class="users-table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Status</th>
                            <th>Coins</th>
                            <th>Last Active</th>
                            <th>Bot Status</th>
                            <th>Coin Operations</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-list">
                        <tr>
                            <td colspan="8" style="text-align: center;">
                                <div class="spinner"></div> Loading user data...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="user-pagination">
                <button class="page-btn" onclick="changeUserPage(-1)"><i class="fas fa-chevron-left"></i></button>
                <span id="user-page-info">Page 1 of 1</span>
                <button class="page-btn" onclick="changeUserPage(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

        <!-- Logs Tab -->
        <div id="logs-tab" class="tab-content" style="display: none;">
            <div class="control-panel">
                <div class="search-bar">
                    <input type="text" id="log-search" placeholder="Filter logs..." autocomplete="off">
                </div>
                <button class="action-btn glow" onclick="refreshLogs()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="action-btn glow" onclick="exportLogs()">
                    <i class="fas fa-file-export"></i> Export
                </button>
                <button class="action-btn glow" onclick="clearLogs()">
                    <i class="fas fa-trash"></i> Clear
                </button>
                <select class="form-select" id="log-level-filter" style="width: 150px;" onchange="filterLogs()">
                    <option value="all">All Levels</option>
                    <option value="info">Info</option>
                    <option value="warning">Warning</option>
                    <option value="error">Error</option>
                    <option value="critical">Critical</option>
                </select>
            </div>

            <div class="users-table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Level</th>
                            <th>Action</th>
                            <th>User</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody id="logs-list">
                        <tr>
                            <td colspan="5" style="text-align: center;">
                                <div class="spinner"></div> Loading logs...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="log-pagination">
                <button class="page-btn" onclick="changeLogPage(-1)"><i class="fas fa-chevron-left"></i></button>
                <span id="log-page-info">Page 1 of 1</span>
                <button class="page-btn" onclick="changeLogPage(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content" style="display: none;">
            <div class="stat-card">
                <h3><i class="fas fa-user-shield"></i> Admin Security</h3>
                <div class="form-group">
                    <label class="form-label">Current Session Token</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="password" id="session-token" class="form-input" value="****************" readonly>
                        <button class="action-icon-btn" onclick="toggleTokenVisibility()" title="Toggle Visibility">
                            <i class="fas fa-eye" id="token-eye-icon"></i>
                        </button>
                        <button class="action-icon-btn" onclick="copyToClipboard('session-token')" title="Copy Token">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Session Expires In</label>
                    <input type="text" class="form-input" id="session-expiry" value="Calculating..." readonly>
                </div>
                <div class="form-group">
                    <button class="action-btn glow" onclick="rotateSessionToken()" style="width: 100%;">
                        <i class="fas fa-sync-alt"></i> Rotate Session Token
                    </button>
                </div>
                <div class="form-group">
                    <button class="action-btn glow" onclick="showPasswordModal()" style="width: 100%;">
                        <i class="fas fa-key"></i> Change Admin Password
                    </button>
                </div>
            </div>

            <div class="stat-card">
                <h3><i class="fas fa-sliders-h"></i> System Configuration</h3>
                <div class="form-group">
                    <label class="form-label">Coin Generation Rate</label>
                    <input type="range" min="1" max="100" value="50" class="form-input" id="coin-rate">
                    <div style="display: flex; justify-content: space-between;">
                        <span>Slow</span>
                        <span id="coin-rate-value">50%</span>
                        <span>Fast</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Maintenance Mode</label>
                    <select class="form-select" id="maintenance-mode">
                        <option value="false">Disabled</option>
                        <option value="true">Enabled</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">API Rate Limit</label>
                    <input type="number" class="form-input" id="api-rate-limit" value="1000">
                </div>
                <div class="form-group">
                    <button class="action-btn glow" onclick="saveSystemSettings()" style="width: 100%;">
                        <i class="fas fa-save"></i> Save Configuration
                    </button>
                </div>
            </div>

            <div class="stat-card">
                <h3><i class="fas fa-terminal"></i> System Commands</h3>
                <div class="form-group">
                    <label class="form-label">Execute Command</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" class="form-input" id="system-command" placeholder="Enter system command...">
                        <button class="action-btn glow" onclick="executeSystemCommand()">
                            <i class="fas fa-play"></i> Run
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Command Output</label>
                    <textarea class="form-input" id="command-output" rows="5" readonly style="resize: vertical;"></textarea>
                </div>
                <div class="form-group">
                    <button class="action-btn glow" onclick="clearCommandOutput()" style="width: 100%;">
                        <i class="fas fa-broom"></i> Clear Output
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Container -->
    <div class="alert-container" id="alert-container"></div>

    <!-- Connection Status -->
    <div class="connection-status" id="connection-status">
        <div class="status-dot"></div>
        <span>CONNECTED</span>
    </div>

    <!-- Session Timer -->
    <div class="session-timer" id="session-timer">
        <i class="fas fa-clock"></i> Session: 00:00:00
    </div>

    <!-- Terminal Line -->
    <div class="terminal-line" id="terminal-line">
        System initialized. Awaiting commands...
    </div>

    <!-- Add User Modal -->
    <div class="modal-overlay" id="add-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New User</h3>
                <button class="modal-close" onclick="hideModal('add-user-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="form-input" id="new-username" autocomplete="off">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="new-email" autocomplete="off">
            </div>
            <div class="form-group">
                <label class="form-label">Initial Coins</label>
                <input type="number" class="form-input" id="new-coins" value="100" min="0">
            </div>
            <div class="form-group">
                <label class="form-label">User Role</label>
                <select class="form-select" id="new-role">
                    <option value="user">Standard User</option>
                    <option value="vip">VIP User</option>
                    <option value="moderator">Moderator</option>
                    <option value="admin">Administrator</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Auto-generate Password</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" class="form-input" id="new-password" value="********" readonly>
                    <button class="action-icon-btn" onclick="generatePassword()" title="Generate Password">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="action-icon-btn" onclick="togglePasswordVisibility('new-password')" title="Toggle Visibility">
                        <i class="fas fa-eye" id="password-eye-icon"></i>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideModal('add-user-modal')">Cancel</button>
                <button class="modal-btn modal-btn-primary" onclick="addNewUser()">Add User</button>
            </div>
        </div>
    </div>

    <!-- Bulk Actions Modal -->
    <div class="modal-overlay" id="bulk-actions-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Bulk User Actions</h3>
                <button class="modal-close" onclick="hideModal('bulk-actions-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Action Type</label>
                <select class="form-select" id="bulk-action-type">
                    <option value="add-coins">Add Coins</option>
                    <option value="remove-coins">Remove Coins</option>
                    <option value="reset-coins">Reset Coins</option>
                    <option value="ban-users">Ban Users</option>
                    <option value="unban-users">Unban Users</option>
                    <option value="delete-users">Delete Users</option>
                </select>
            </div>
            <div class="form-group" id="bulk-coin-amount-group">
                <label class="form-label">Coin Amount</label>
                <input type="number" class="form-input" id="bulk-coin-amount" value="100" min="1">
            </div>
            <div class="form-group">
                <label class="form-label">Target Users</label>
                <select class="form-select" id="bulk-target">
                    <option value="all">All Users</option>
                    <option value="active">Active Users Only</option>
                    <option value="inactive">Inactive Users Only</option>
                    <option value="selected">Selected Users (from table)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Confirmation</label>
                <input type="text" class="form-input" id="bulk-confirm" placeholder="Type 'CONFIRM' to proceed" autocomplete="off">
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideModal('bulk-actions-modal')">Cancel</button>
                <button class="modal-btn modal-btn-danger" onclick="executeBulkAction()" id="bulk-execute-btn">Execute</button>
            </div>
        </div>
    </div>

    <!-- User Detail Modal -->
    <div class="modal-overlay" id="user-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">User Details</h3>
                <button class="modal-close" onclick="hideModal('user-detail-modal')">&times;</button>
            </div>
            <div class="user-details-grid">
                <div class="user-detail-item">
                    <div class="user-detail-label">Username</div>
                    <div class="user-detail-value" id="detail-username">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">User ID</div>
                    <div class="user-detail-value" id="detail-userid">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Email</div>
                    <div class="user-detail-value" id="detail-email">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Account Status</div>
                    <div class="user-detail-value" id="detail-status">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Current Coins</div>
                    <div class="user-detail-value" id="detail-coins">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Total Coins Earned</div>
                    <div class="user-detail-value" id="detail-total-coins">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Last Active</div>
                    <div class="user-detail-value" id="detail-last-active">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Account Created</div>
                    <div class="user-detail-value" id="detail-created">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">User Role</div>
                    <div class="user-detail-value" id="detail-role">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Bot Connected</div>
                    <div class="user-detail-value" id="detail-bot">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">IP Address</div>
                    <div class="user-detail-value" id="detail-ip">-</div>
                </div>
                <div class="user-detail-item">
                    <div class="user-detail-label">Device Info</div>
                    <div class="user-detail-value" id="detail-device">-</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="showEditUserModal()">Edit User</button>
                <button class="modal-btn modal-btn-danger" onclick="confirmUserDeletion()">Delete User</button>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal-overlay" id="edit-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit User</h3>
                <button class="modal-close" onclick="hideModal('edit-user-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="form-input" id="edit-username" readonly>
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="edit-email">
            </div>
            <div class="form-group">
                <label class="form-label">User Role</label>
                <select class="form-select" id="edit-role">
                    <option value="user">Standard User</option>
                    <option value="vip">VIP User</option>
                    <option value="moderator">Moderator</option>
                    <option value="admin">Administrator</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Account Status</label>
                <select class="form-select" id="edit-status">
                    <option value="active">Active</option>
                    <option value="suspended">Suspended</option>
                    <option value="banned">Banned</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Reset Password</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="password" class="form-input" id="edit-password" placeholder="Leave blank to keep current">
                    <button class="action-icon-btn" onclick="generatePassword('edit-password')" title="Generate Password">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="action-icon-btn" onclick="togglePasswordVisibility('edit-password')" title="Toggle Visibility">
                        <i class="fas fa-eye" id="edit-password-eye-icon"></i>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideModal('edit-user-modal')">Cancel</button>
                <button class="modal-btn modal-btn-primary" onclick="saveUserChanges()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal-overlay" id="change-password-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Change Admin Password</h3>
                <button class="modal-close" onclick="hideModal('change-password-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Current Password</label>
                <input type="password" class="form-input" id="current-password" autocomplete="current-password">
            </div>
            <div class="form-group">
                <label class="form-label">New Password</label>
                <input type="password" class="form-input" id="new-password" autocomplete="new-password">
            </div>
            <div class="form-group">
                <label class="form-label">Confirm New Password</label>
                <input type="password" class="form-input" id="confirm-password" autocomplete="new-password">
            </div>
            <div class="form-group">
                <div style="display: flex; gap: 10px;">
                    <button class="action-icon-btn" onclick="generateStrongPassword()" title="Generate Strong Password">
                        <i class="fas fa-key"></i> Generate
                    </button>
                    <button class="action-icon-btn" onclick="togglePasswordVisibility('new-password', 'confirm-password')" title="Toggle Visibility">
                        <i class="fas fa-eye"></i> Show
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideModal('change-password-modal')">Cancel</button>
                <button class="modal-btn modal-btn-primary" onclick="changeAdminPassword()">Change Password</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmation-modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3 class="modal-title" id="confirmation-title">Confirm Action</h3>
                <button class="modal-close" onclick="hideModal('confirmation-modal')">&times;</button>
            </div>
            <div class="form-group">
                <p id="confirmation-message">Are you sure you want to perform this action?</p>
            </div>
            <div class="form-group" id="confirmation-input-group" style="display: none;">
                <label class="form-label" id="confirmation-input-label">Enter password to confirm:</label>
                <input type="password" class="form-input" id="confirmation-input">
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="hideModal('confirmation-modal')">Cancel</button>
                <button class="modal-btn modal-btn-danger" onclick="executeConfirmedAction()" id="confirmation-execute-btn">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="modal-overlay" id="loading-overlay" style="background: rgba(0, 0, 0, 0.9); z-index: 3000;">
        <div class="modal-content" style="background: transparent; border: none; box-shadow: none; text-align: center;">
            <div class="spinner" style="width: 50px; height: 50px; border-width: 5px; margin: 0 auto 20px;"></div>
            <h3 style="color: var(--neon-blue);" id="loading-message">Processing Request</h3>
            <p style="color: var(--terminal-text);" id="loading-subtext">Please wait...</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Enhanced Admin Console with realistic functionality
        const ADMIN_TOKEN = localStorage.getItem('oblivion_admin');
        const API_BASE_URL = 'https://api.oblivion-network.com/v1/admin';
        const SESSION_TIMEOUT = 60 * 60 * 1000; // 1 hour session timeout
        
        // Check authentication
        if (!ADMIN_TOKEN) {
            window.location.href = '/admin/login';
        }

        // Session management
        let sessionStartTime = Date.now();
        let sessionTimerInterval;
        let autoLogoutTimer;
        let isOnline = true;
        let currentUser = null;
        
        // Data management
        let usersData = [];
        let logsData = [];
        let filteredUsers = [];
        let filteredLogs = [];
        let currentUserPage = 1;
        let currentLogPage = 1;
        const itemsPerPage = 10;
        
        // Chart instance
        let activityChart = null;

        // Initialize the console
        document.addEventListener('DOMContentLoaded', () => {
            // Start session timer
            updateSessionTimer();
            sessionTimerInterval = setInterval(updateSessionTimer, 1000);
            
            // Set up auto logout
            resetAutoLogoutTimer();
            
            // Start connection monitoring
            monitorConnection();
            
            // Update current time
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // Load initial data
            loadData();
            loadLogs();
            
            // Initialize chart
            initializeChart();
            
            // Set up event listeners
            setupEventListeners();
            
            // Show welcome message
            setTimeout(() => {
                showAlert('Oblivion Admin Console initialized. Welcome back, Administrator.', 'info');
                updateTerminalLine('System ready. Monitoring all network activity...');
            }, 1000);
            
            // Check for updates
            checkForUpdates();
        });

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Find the tab index
            const tabIndex = Array.from(document.querySelectorAll('.tab')).findIndex(tab => 
                tab.textContent.trim().toLowerCase().includes(tabName.toLowerCase())
            );
            
            if (tabIndex !== -1) {
                document.querySelectorAll('.tab')[tabIndex].classList.add('active');
            }
            
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            
            // Special handling for certain tabs
            if (tabName === 'dashboard') {
                resizeChart();
            }
            
            updateTerminalLine(`Switched to ${tabName} view`);
        }

        // Load all data
        const loadData = async () => {
            try {
                showLoading('Loading system data...');
                
                // Load stats
                const statsRes = await fetchWithTimeout(`${API_BASE_URL}/stats`, {
                    headers: {
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    timeout: 5000
                });
                
                if (!statsRes.ok) throw new Error('Failed to fetch stats');
                const stats = await statsRes.json();
                
                document.getElementById('total-users').textContent = stats.totalUsers.toLocaleString();
                document.getElementById('active-today').textContent = stats.activeToday.toLocaleString();
                document.getElementById('bot-connections').textContent = stats.botConnections.toLocaleString();
                document.getElementById('total-coins').textContent = stats.totalCoins.toLocaleString();
                document.getElementById('new-today').textContent = stats.newUsersToday.toLocaleString();
                document.getElementById('total-tx').textContent = stats.dailyTransactions.toLocaleString();
                
                // Update trends
                updateTrend('user-trend', stats.userTrend);
                updateTrend('active-trend', stats.activeTrend);
                updateTrend('bot-trend', stats.botTrend);
                updateTrend('coin-trend', stats.coinTrend);
                updateTrend('new-trend', stats.newUserTrend);
                updateTrend('tx-trend', stats.txTrend);
                
                // System stats
                document.getElementById('system-status').textContent = stats.systemStatus;
                document.getElementById('system-load').textContent = `Load: ${stats.systemLoad}`;
                document.getElementById('security-level').textContent = stats.securityLevel;
                document.getElementById('last-scan').textContent = `Last scan: ${stats.lastScan}`;
                document.getElementById('db-size').textContent = stats.dbSize;
                document.getElementById('db-uptime').textContent = `Uptime: ${stats.dbUptime}`;
                document.getElementById('network-status').textContent = stats.networkStatus;
                document.getElementById('network-latency').textContent = `Latency: ${stats.networkLatency}`;
                
                // Load users
                const usersRes = await fetchWithTimeout(`${API_BASE_URL}/users`, {
                    headers: {
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    timeout: 10000
                });
                
                if (!usersRes.ok) throw new Error('Failed to fetch users');
                usersData = await usersRes.json();
                filteredUsers = [...usersData];
                renderUsers();
                
                hideLoading();
                showAlert('System data refreshed successfully', 'success');
                updateTerminalLine('Data synchronization complete');
                
                // Update chart data
                updateChartData(stats.activityData);
                
            } catch (error) {
                console.error('Error loading data:', error);
                hideLoading();
                showAlert(`Failed to connect to Oblivion network: ${error.message}`, 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
                
                // Show offline status
                document.getElementById('connection-status').classList.add('offline');
                document.getElementById('connection-status').innerHTML = '<div class="status-dot"></div><span>OFFLINE - Attempting to reconnect...</span>';
                isOnline = false;
                
                // Try to reconnect
                setTimeout(loadData, 5000);
            }
        };

        // Load logs
        const loadLogs = async () => {
            try {
                showLoading('Loading activity logs...');
                
                const logsRes = await fetchWithTimeout(`${API_BASE_URL}/logs`, {
                    headers: {
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    timeout: 8000
                });
                
                if (!logsRes.ok) throw new Error('Failed to fetch logs');
                logsData = await logsRes.json();
                filteredLogs = [...logsData];
                renderLogs();
                
                hideLoading();
                updateTerminalLine('Activity logs loaded');
            } catch (error) {
                console.error('Error loading logs:', error);
                hideLoading();
                showAlert('Failed to load activity logs', 'error');
                updateTerminalLine(`LOG ERROR: ${error.message}`);
            }
        };

        // Render users table with pagination
        const renderUsers = () => {
            const usersList = document.getElementById('users-list');
            usersList.innerHTML = '';
            
            if (filteredUsers.length === 0) {
                usersList.innerHTML = '<tr><td colspan="8" style="text-align: center;">No users found</td></tr>';
                updatePagination('user', 0);
                return;
            }
            
            const startIndex = (currentUserPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredUsers.length);
            const usersToDisplay = filteredUsers.slice(startIndex, endIndex);
            
            usersToDisplay.forEach(user => {
                const row = document.createElement('tr');
                row.dataset.username = user.username;
                
                row.innerHTML = `
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>
                        <span class="status ${user.status === 'connected' ? 'status-connected pulse' : 
                                          user.status === 'pending' ? 'status-pending pulse' : 'status-disconnected'}"></span>
                        ${user.status.toUpperCase()}
                    </td>
                    <td class="glow">${user.coins.toLocaleString()}</td>
                    <td>${formatDateTime(user.lastActive)}</td>
                    <td>
                        <button class="action-icon-btn bot-btn" onclick="toggleBotStatus('${user.username}', ${!user.botConnected})" title="${user.botConnected ? 'Disconnect' : 'Connect'} Bot">
                            <i class="fas ${user.botConnected ? 'fa-link' : 'fa-unlink'}"></i>
                        </button>
                    </td>
                    <td>
                        <div class="coin-control">
                            <input type="number" class="coin-input" id="coins-${user.username}" value="100" min="1">
                            <button class="action-icon-btn give-btn" onclick="giveCoins('${user.username}')" title="Give Coins">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="action-icon-btn take-btn" onclick="takeCoins('${user.username}')" title="Take Coins">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button class="action-icon-btn reset-btn" onclick="resetCoins('${user.username}')" title="Reset Coins">
                                <i class="fas fa-undo"></i>
                            </button>
                        </div>
                    </td>
                    <td>
                        <button class="action-icon-btn" onclick="viewUserDetails('${user.username}')" title="View Details" style="border-color: var(--neon-blue); color: var(--neon-blue);">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-icon-btn" onclick="showEditUserModal('${user.username}')" title="Edit User" style="border-color: var(--neon-purple); color: var(--neon-purple);">
                            <i class="fas fa-edit"></i>
                        </button>
                    </td>
                `;
                
                usersList.appendChild(row);
            });
            
            updatePagination('user', filteredUsers.length);
        };

        // Render logs table with pagination
        const renderLogs = () => {
            const logsList = document.getElementById('logs-list');
            logsList.innerHTML = '';
            
            if (filteredLogs.length === 0) {
                logsList.innerHTML = '<tr><td colspan="5" style="text-align: center;">No logs found</td></tr>';
                updatePagination('log', 0);
                return;
            }
            
            const startIndex = (currentLogPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredLogs.length);
            const logsToDisplay = filteredLogs.slice(startIndex, endIndex);
            
            logsToDisplay.forEach(log => {
                const row = document.createElement('tr');
                
                // Determine log level color
                let levelColor = 'var(--neon-blue)';
                if (log.level === 'warning') levelColor = 'var(--neon-yellow)';
                else if (log.level === 'error') levelColor = 'var(--neon-red)';
                else if (log.level === 'critical') levelColor = 'var(--neon-purple)';
                
                row.innerHTML = `
                    <td>${formatDateTime(log.timestamp)}</td>
                    <td style="color: ${levelColor}">${log.level.toUpperCase()}</td>
                    <td>${log.action.replace(/_/g, ' ').toUpperCase()}</td>
                    <td>${log.username || 'SYSTEM'}</td>
                    <td>${formatLogDetails(log.details)}</td>
                `;
                
                logsList.appendChild(row);
            });
            
            updatePagination('log', filteredLogs.length);
        };

        // Update pagination controls
        const updatePagination = (type, totalItems) => {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pageInfo = `Page ${type === 'user' ? currentUserPage : currentLogPage} of ${totalPages}`;
            
            document.getElementById(`${type}-page-info`).textContent = pageInfo;
            
            // Disable previous button on first page
            document.querySelector(`#${type}-pagination button:first-child`).disabled = 
                (type === 'user' ? currentUserPage : currentLogPage) <= 1;
            
            // Disable next button on last page
            document.querySelector(`#${type}-pagination button:last-child`).disabled = 
                (type === 'user' ? currentUserPage : currentLogPage) >= totalPages;
        };

        // Change user page
        const changeUserPage = (delta) => {
            const newPage = currentUserPage + delta;
            const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);
            
            if (newPage > 0 && newPage <= totalPages) {
                currentUserPage = newPage;
                renderUsers();
            }
        };

        // Change log page
        const changeLogPage = (delta) => {
            const newPage = currentLogPage + delta;
            const totalPages = Math.ceil(filteredLogs.length / itemsPerPage);
            
            if (newPage > 0 && newPage <= totalPages) {
                currentLogPage = newPage;
                renderLogs();
            }
        };

        // Filter logs by level
        const filterLogs = () => {
            const levelFilter = document.getElementById('log-level-filter').value;
            const searchQuery = document.getElementById('log-search').value.toLowerCase();
            
            filteredLogs = logsData.filter(log => {
                const matchesLevel = levelFilter === 'all' || log.level === levelFilter;
                const matchesSearch = 
                    log.action.toLowerCase().includes(searchQuery) ||
                    (log.username && log.username.toLowerCase().includes(searchQuery)) ||
                    JSON.stringify(log.details).toLowerCase().includes(searchQuery);
                
                return matchesLevel && matchesSearch;
            });
            
            currentLogPage = 1;
            renderLogs();
        };

        // User actions
        const giveCoins = async (username) => {
            const amount = parseInt(document.getElementById(`coins-${username}`).value) || 0;
            if (amount <= 0) {
                showAlert('Amount must be positive', 'warning');
                return;
            }
            
            try {
                showLoading(`Adding ${amount} coins to ${username}...`);
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users/${username}/coins`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({
                        amount,
                        operation: 'add'
                    }),
                    timeout: 5000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Operation failed');
                }
                
                await loadData();
                hideLoading();
                showAlert(`Added ${amount} coins to ${username}`, 'success');
                updateTerminalLine(`Coins added to ${username}`);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to add coins', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const takeCoins = async (username) => {
            const amount = parseInt(document.getElementById(`coins-${username}`).value) || 0;
            if (amount <= 0) {
                showAlert('Amount must be positive', 'warning');
                return;
            }
            
            showConfirmation(
                'Confirm Coin Removal',
                `Are you sure you want to remove ${amount} coins from ${username}?`,
                async () => {
                    try {
                        showLoading(`Removing ${amount} coins from ${username}...`);
                        
                        const response = await fetchWithTimeout(`${API_BASE_URL}/users/${username}/coins`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${ADMIN_TOKEN}`
                            },
                            body: JSON.stringify({
                                amount,
                                operation: 'subtract'
                            }),
                            timeout: 5000
                        });
                        
                        if (!response.ok) {
                            const error = await response.json();
                            throw new Error(error.message || 'Operation failed');
                        }
                        
                        await loadData();
                        hideLoading();
                        showAlert(`Removed ${amount} coins from ${username}`, 'success');
                        updateTerminalLine(`Coins removed from ${username}`);
                        
                    } catch (error) {
                        hideLoading();
                        showAlert(error.message || 'Failed to remove coins', 'error');
                        updateTerminalLine(`ERROR: ${error.message}`);
                    }
                }
            );
        };

        const resetCoins = async (username) => {
            showConfirmation(
                'Confirm Coin Reset',
                `Are you sure you want to reset ${username}'s coins to 0?`,
                async () => {
                    try {
                        showLoading(`Resetting coins for ${username}...`);
                        
                        const response = await fetchWithTimeout(`${API_BASE_URL}/users/${username}/coins`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${ADMIN_TOKEN}`
                            },
                            body: JSON.stringify({
                                amount: 0,
                                operation: 'set'
                            }),
                            timeout: 5000
                        });
                        
                        if (!response.ok) {
                            const error = await response.json();
                            throw new Error(error.message || 'Operation failed');
                        }
                        
                        await loadData();
                        hideLoading();
                        showAlert(`Reset ${username}'s coins to 0`, 'success');
                        updateTerminalLine(`Coins reset for ${username}`);
                        
                    } catch (error) {
                        hideLoading();
                        showAlert(error.message || 'Failed to reset coins', 'error');
                        updateTerminalLine(`ERROR: ${error.message}`);
                    }
                }
            );
        };

        const toggleBotStatus = async (username, newStatus) => {
            try {
                showLoading(`${newStatus ? 'Connecting' : 'Disconnecting'} bot for ${username}...`);
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users/${username}/bot`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({
                        connected: newStatus
                    }),
                    timeout: 5000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Operation failed');
                }
                
                await loadData();
                hideLoading();
                showAlert(`Bot status for ${username} set to ${newStatus ? 'connected' : 'disconnected'}`, 'success');
                updateTerminalLine(`Bot ${newStatus ? 'connected' : 'disconnected'} for ${username}`);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to update bot status', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const viewUserDetails = (username) => {
            const user = usersData.find(u => u.username === username);
            if (user) {
                currentUser = user;
                
                // Populate details
                document.getElementById('detail-username').textContent = user.username;
                document.getElementById('detail-userid').textContent = user.id;
                document.getElementById('detail-email').textContent = user.email;
                document.getElementById('detail-status').textContent = user.accountStatus || 'active';
                document.getElementById('detail-coins').textContent = user.coins.toLocaleString();
                document.getElementById('detail-total-coins').textContent = user.totalCoinsEarned?.toLocaleString() || 'N/A';
                document.getElementById('detail-last-active').textContent = formatDateTime(user.lastActive);
                document.getElementById('detail-created').textContent = formatDateTime(user.createdAt);
                document.getElementById('detail-role').textContent = user.role || 'user';
                document.getElementById('detail-bot').textContent = user.botConnected ? 'Yes' : 'No';
                document.getElementById('detail-ip').textContent = user.lastIp || 'N/A';
                document.getElementById('detail-device').textContent = user.deviceInfo || 'N/A';
                
                showModal('user-detail-modal');
                updateTerminalLine(`Viewing details for ${username}`);
            }
        };

        // Modal functions
        const showModal = (modalId) => {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        };

        const hideModal = (modalId) => {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        };

        const showAddUserModal = () => {
            document.getElementById('new-username').value = '';
            document.getElementById('new-email').value = '';
            document.getElementById('new-coins').value = '100';
            document.getElementById('new-role').value = 'user';
            generatePassword();
            showModal('add-user-modal');
            updateTerminalLine('Add user modal opened');
        };

        const addNewUser = async () => {
            const username = document.getElementById('new-username').value.trim();
            const email = document.getElementById('new-email').value.trim();
            const coins = parseInt(document.getElementById('new-coins').value) || 100;
            const role = document.getElementById('new-role').value;
            const password = document.getElementById('new-password').value;
            
            if (!username || !email) {
                showAlert('Username and email are required', 'error');
                return;
            }
            
            if (!password || password === '********') {
                showAlert('Please generate or enter a password', 'error');
                return;
            }
            
            try {
                showLoading(`Creating user ${username}...`);
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({
                        username,
                        email,
                        password,
                        coins,
                        role
                    }),
                    timeout: 8000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to create user');
                }
                
                hideModal('add-user-modal');
                await loadData();
                hideLoading();
                showAlert(`User ${username} created successfully`, 'success');
                updateTerminalLine(`New user created: ${username}`);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to create user', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const showEditUserModal = (username) => {
            const user = username ? usersData.find(u => u.username === username) : currentUser;
            if (!user) return;
            
            document.getElementById('edit-username').value = user.username;
            document.getElementById('edit-email').value = user.email;
            document.getElementById('edit-role').value = user.role || 'user';
            document.getElementById('edit-status').value = user.accountStatus || 'active';
            document.getElementById('edit-password').value = '';
            
            showModal('edit-user-modal');
            updateTerminalLine(`Editing user ${user.username}`);
        };

        const saveUserChanges = async () => {
            if (!currentUser) return;
            
            const email = document.getElementById('edit-email').value.trim();
            const role = document.getElementById('edit-role').value;
            const status = document.getElementById('edit-status').value;
            const password = document.getElementById('edit-password').value;
            
            if (!email) {
                showAlert('Email is required', 'error');
                return;
            }
            
            try {
                showLoading(`Saving changes for ${currentUser.username}...`);
                
                const updateData = {
                    email,
                    role,
                    accountStatus: status
                };
                
                if (password) {
                    updateData.password = password;
                }
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users/${currentUser.username}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify(updateData),
                    timeout: 8000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to update user');
                }
                
                hideModal('edit-user-modal');
                await loadData();
                hideLoading();
                showAlert(`User ${currentUser.username} updated successfully`, 'success');
                updateTerminalLine(`User ${currentUser.username} updated`);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to update user', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const confirmUserDeletion = () => {
            if (!currentUser) return;
            
            showConfirmation(
                'Confirm User Deletion',
                `Are you sure you want to permanently delete ${currentUser.username}? This action cannot be undone.`,
                deleteCurrentUser,
                true
            );
        };

        const deleteCurrentUser = async () => {
            if (!currentUser) return;
            
            try {
                showLoading(`Deleting user ${currentUser.username}...`);
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users/${currentUser.username}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    timeout: 8000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to delete user');
                }
                
                hideModal('user-detail-modal');
                await loadData();
                hideLoading();
                showAlert(`User ${currentUser.username} deleted successfully`, 'success');
                updateTerminalLine(`User ${currentUser.username} deleted`);
                currentUser = null;
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to delete user', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const showBulkActionsModal = () => {
            document.getElementById('bulk-action-type').value = 'add-coins';
            document.getElementById('bulk-coin-amount').value = '100';
            document.getElementById('bulk-target').value = 'all';
            document.getElementById('bulk-confirm').value = '';
            showModal('bulk-actions-modal');
            updateTerminalLine('Bulk actions modal opened');
        };

        const executeBulkAction = async () => {
            const actionType = document.getElementById('bulk-action-type').value;
            const target = document.getElementById('bulk-target').value;
            const confirmation = document.getElementById('bulk-confirm').value;
            
            if (confirmation !== 'CONFIRM') {
                showAlert('Please type "CONFIRM" to proceed', 'error');
                return;
            }
            
            let usersToProcess = [];
            
            if (target === 'all') {
                usersToProcess = [...usersData];
            } else if (target === 'active') {
                usersToProcess = usersData.filter(u => u.status === 'connected');
            } else if (target === 'inactive') {
                usersToProcess = usersData.filter(u => u.status !== 'connected');
            } else if (target === 'selected') {
                // In a real app, you would have selected users
                showAlert('No users selected from table', 'warning');
                return;
            }
            
            if (usersToProcess.length === 0) {
                showAlert('No users match the selected criteria', 'warning');
                return;
            }
            
            try {
                showLoading(`Processing bulk action for ${usersToProcess.length} users...`);
                
                let requestBody = {
                    action: actionType,
                    usernames: usersToProcess.map(u => u.username)
                };
                
                if (actionType.includes('coins')) {
                    const amount = parseInt(document.getElementById('bulk-coin-amount').value) || 0;
                    if (amount <= 0 && actionType !== 'reset-coins') {
                        throw new Error('Amount must be positive');
                    }
                    requestBody.amount = amount;
                }
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/users/bulk`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify(requestBody),
                    timeout: 15000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Bulk operation failed');
                }
                
                const result = await response.json();
                hideModal('bulk-actions-modal');
                await loadData();
                hideLoading();
                showAlert(`Bulk action completed: ${result.processed} users affected`, 'success');
                updateTerminalLine(`Bulk action completed for ${result.processed} users`);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Bulk operation failed', 'error');
                updateTerminalLine(`BULK ERROR: ${error.message}`);
            }
        };

        const showPasswordModal = () => {
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            showModal('change-password-modal');
            updateTerminalLine('Password change modal opened');
        };

        const changeAdminPassword = async () => {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showAlert('All fields are required', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showAlert('New passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 12) {
                showAlert('Password must be at least 12 characters', 'error');
                return;
            }
            
            try {
                showLoading('Changing admin password...');
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/admin/password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({
                        currentPassword,
                        newPassword
                    }),
                    timeout: 8000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to change password');
                }
                
                hideModal('change-password-modal');
                hideLoading();
                showAlert('Admin password changed successfully', 'success');
                updateTerminalLine('Admin password changed');
                
                // Force logout after password change
                setTimeout(logout, 2000);
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to change password', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const rotateSessionToken = async () => {
            showConfirmation(
                'Rotate Session Token',
                'Are you sure you want to rotate your session token? This will log you out of all other sessions.',
                async () => {
                    try {
                        showLoading('Rotating session token...');
                        
                        const response = await fetchWithTimeout(`${API_BASE_URL}/admin/rotate-token`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${ADMIN_TOKEN}`
                            },
                            timeout: 8000
                        });
                        
                        if (!response.ok) {
                            const error = await response.json();
                            throw new Error(error.message || 'Failed to rotate token');
                        }
                        
                        const data = await response.json();
                        localStorage.setItem('oblivion_admin', data.token);
                        ADMIN_TOKEN = data.token;
                        
                        hideLoading();
                        showAlert('Session token rotated successfully', 'success');
                        updateTerminalLine('Session token rotated - other sessions terminated');
                        
                    } catch (error) {
                        hideLoading();
                        showAlert(error.message || 'Failed to rotate token', 'error');
                        updateTerminalLine(`ERROR: ${error.message}`);
                    }
                }
            );
        };

        const saveSystemSettings = async () => {
            const coinRate = document.getElementById('coin-rate').value;
            const maintenanceMode = document.getElementById('maintenance-mode').value === 'true';
            const apiRateLimit = parseInt(document.getElementById('api-rate-limit').value) || 1000;
            
            try {
                showLoading('Saving system settings...');
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/admin/settings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({
                        coinGenerationRate: coinRate,
                        maintenanceMode,
                        apiRateLimit
                    }),
                    timeout: 8000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Failed to save settings');
                }
                
                hideLoading();
                showAlert('System settings saved successfully', 'success');
                updateTerminalLine('System configuration updated');
                
            } catch (error) {
                hideLoading();
                showAlert(error.message || 'Failed to save settings', 'error');
                updateTerminalLine(`ERROR: ${error.message}`);
            }
        };

        const executeSystemCommand = async () => {
            const command = document.getElementById('system-command').value.trim();
            if (!command) {
                showAlert('Please enter a command', 'error');
                return;
            }
            
            try {
                showLoading(`Executing command: ${command}`);
                
                const response = await fetchWithTimeout(`${API_BASE_URL}/admin/command`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}`
                    },
                    body: JSON.stringify({ command }),
                    timeout: 15000
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'Command execution failed');
                }
                
                const result = await response.json();
                document.getElementById('command-output').value = result.output || 'No output';
                hideLoading();
                showAlert('Command executed successfully', 'success');
                updateTerminalLine(`Command executed: ${command}`);
                
            } catch (error) {
                document.getElementById('command-output').value = error.message || 'Command execution failed';
                hideLoading();
                showAlert(error.message || 'Command execution failed', 'error');
                updateTerminalLine(`COMMAND ERROR: ${error.message}`);
            }
        };

        const clearCommandOutput = () => {
            document.getElementById('command-output').value = '';
            document.getElementById('system-command').value = '';
            updateTerminalLine('Command output cleared');
        };

        // Utility functions
        const refreshData = () => {
            loadData();
            updateTerminalLine('Manual data refresh initiated');
        };

        const refreshLogs = () => {
            loadLogs();
            updateTerminalLine('Manual log refresh initiated');
        };

        const exportData = () => {
            const dataStr = JSON.stringify(usersData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `oblivion-users-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showAlert('User data exported', 'success');
            updateTerminalLine('User data exported to JSON');
        };

        const exportLogs = () => {
            const dataStr = JSON.stringify(logsData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `oblivion-logs-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showAlert('Activity logs exported', 'success');
            updateTerminalLine('Activity logs exported to JSON');
        };

        const clearLogs = async () => {
            showConfirmation(
                'Clear All Logs',
                'Are you sure you want to clear all activity logs? This action cannot be undone.',
                async () => {
                    try {
                        showLoading('Clearing activity logs...');
                        
                        const response = await fetchWithTimeout(`${API_BASE_URL}/logs`, {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `Bearer ${ADMIN_TOKEN}`
                            },
                            timeout: 8000
                        });
                        
                        if (!response.ok) {
                            const error = await response.json();
                            throw new Error(error.message || 'Failed to clear logs');
                        }
                        
                        logsData = [];
                        filteredLogs = [];
                        renderLogs();
                        hideLoading();
                        showAlert('Activity logs cleared', 'success');
                        updateTerminalLine('Activity logs cleared');
                        
                    } catch (error) {
                        hideLoading();
                        showAlert(error.message || 'Failed to clear logs', 'error');
                        updateTerminalLine(`ERROR: ${error.message}`);
                    }
                }
            );
        };

        const showAlert = (message, type) => {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : 
                              type === 'error' ? 'fa-times-circle' : 
                              type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'}"></i>
                ${message}
            `;
            
            alertContainer.appendChild(alert);
            setTimeout(() => {
                alert.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                alert.classList.remove('show');
                setTimeout(() => {
                    alert.remove();
                }, 300);
            }, 5000);
        };

        const showLoading = (message, subtext = 'Please wait...') => {
            document.getElementById('loading-message').textContent = message;
            document.getElementById('loading-subtext').textContent = subtext;
            document.getElementById('loading-overlay').classList.add('active');
        };

        const hideLoading = () => {
            document.getElementById('loading-overlay').classList.remove('active');
        };

        const showConfirmation = (title, message, callback, requirePassword = false) => {
            document.getElementById('confirmation-title').textContent = title;
            document.getElementById('confirmation-message').textContent = message;
            document.getElementById('confirmation-input-group').style.display = requirePassword ? 'block' : 'none';
            document.getElementById('confirmation-input').value = '';
            
            const executeBtn = document.getElementById('confirmation-execute-btn');
            executeBtn.onclick = () => {
                if (requirePassword) {
                    const password = document.getElementById('confirmation-input').value;
                    if (!password) {
                        showAlert('Password is required', 'error');
                        return;
                    }
                    // In a real app, you would verify the password first
                }
                hideModal('confirmation-modal');
                callback();
            };
            
            showModal('confirmation-modal');
        };

        const logout = () => {
            // In a real app, you would call an API to invalidate the token
            localStorage.removeItem('oblivion_admin');
            window.location.href = '/admin/login';
        };

        const generatePassword = (fieldId = 'new-password') => {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()';
            let password = '';
            
            for (let i = 0; i < 16; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            document.getElementById(fieldId).value = password;
            
            if (fieldId === 'new-password') {
                document.getElementById('password-eye-icon').classList.remove('fa-eye-slash');
                document.getElementById('password-eye-icon').classList.add('fa-eye');
            }
        };

        const generateStrongPassword = () => {
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            let password = '';
            
            // Ensure at least one of each character type
            password += uppercase.charAt(Math.floor(Math.random() * uppercase.length));
            password += lowercase.charAt(Math.floor(Math.random() * lowercase.length));
            password += numbers.charAt(Math.floor(Math.random() * numbers.length));
            password += symbols.charAt(Math.floor(Math.random() * symbols.length));
            
            // Fill the rest randomly
            const allChars = uppercase + lowercase + numbers + symbols;
            for (let i = 0; i < 12; i++) {
                password += allChars.charAt(Math.floor(Math.random() * allChars.length));
            }
            
            // Shuffle the password
            password = password.split('').sort(() => 0.5 - Math.random()).join('');
            
            document.getElementById('new-password').value = password;
            document.getElementById('confirm-password').value = password;
        };

        const togglePasswordVisibility = (...fieldIds) => {
            fieldIds.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const icon = document.getElementById(`${fieldId}-eye-icon`) || 
                             document.getElementById('password-eye-icon') || 
                             document.getElementById('edit-password-eye-icon');
                
                if (field.type === 'password') {
                    field.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    field.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        };

        const toggleTokenVisibility = () => {
            const tokenField = document.getElementById('session-token');
            const icon = document.getElementById('token-eye-icon');
            
            if (tokenField.type === 'password') {
                tokenField.type = 'text';
                tokenField.value = ADMIN_TOKEN;
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                tokenField.type = 'password';
                tokenField.value = '****************';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        };

        const copyToClipboard = (elementId) => {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            
            // Show feedback
            const originalText = element.value;
            element.value = 'Copied!';
            setTimeout(() => {
                element.value = originalText;
            }, 1000);
            
            showAlert('Copied to clipboard', 'success');
        };

        const updateSessionTimer = () => {
            const elapsed = Date.now() - sessionStartTime;
            const hours = Math.floor(elapsed / 3600000).toString().padStart(2, '0');
            const minutes = Math.floor((elapsed % 3600000) / 60000).toString().padStart(2, '0');
            const seconds = Math.floor((elapsed % 60000) / 1000).toString().padStart(2, '0');
            
            document.getElementById('session-timer').innerHTML = `<i class="fas fa-clock"></i> Session: ${hours}:${minutes}:${seconds}`;
            
            // Warn when session is about to expire
            if (elapsed > SESSION_TIMEOUT - 300000) { // 5 minutes before timeout
                document.getElementById('session-timer').style.color = 'var(--neon-red)';
                if (elapsed > SESSION_TIMEOUT - 60000 && elapsed % 10000 < 1000) {
                    showAlert('Session will expire soon. Save your work.', 'warning');
                }
            } else if (elapsed > SESSION_TIMEOUT - 600000) { // 10 minutes before timeout
                document.getElementById('session-timer').style.color = 'var(--neon-yellow)';
            }
            
            // Auto logout when session expires
            if (elapsed >= SESSION_TIMEOUT) {
                showAlert('Session expired. Logging out...', 'warning');
                setTimeout(logout, 2000);
            }
        };

        const resetAutoLogoutTimer = () => {
            if (autoLogoutTimer) {
                clearTimeout(autoLogoutTimer);
            }
            autoLogoutTimer = setTimeout(() => {
                showAlert('Inactivity detected. Logging out...', 'warning');
                logout();
            }, SESSION_TIMEOUT);
            
            // Reset on any user activity
            document.addEventListener('mousemove', resetAutoLogoutTimer);
            document.addEventListener('keypress', resetAutoLogoutTimer);
            document.addEventListener('click', resetAutoLogoutTimer);
        };

        const updateCurrentTime = () => {
            const now = new Date();
            const timeStr = now.toLocaleTimeString();
            const dateStr = now.toLocaleDateString();
            document.getElementById('current-time').textContent = `${dateStr} ${timeStr}`;
        };

        const updateTerminalLine = (message) => {
            const terminal = document.getElementById('terminal-line');
            terminal.textContent = message;
            
            // Add to command history
            const now = new Date();
            const timestamp = now.toLocaleTimeString();
            terminal.dataset.history = (terminal.dataset.history || '') + `\n[${timestamp}] ${message}`;
        };

        const monitorConnection = () => {
            // Simulate connection monitoring
            setInterval(() => {
                if (isOnline) {
                    // Randomly simulate connection issues
                    if (Math.random() < 0.01) { // 1% chance of "disconnection"
                        isOnline = false;
                        document.getElementById('connection-status').classList.add('offline');
                        document.getElementById('connection-status').innerHTML = '<div class="status-dot"></div><span>OFFLINE - Attempting to reconnect...</span>';
                        updateTerminalLine('Network connection lost. Attempting to reconnect...');
                        
                        // Simulate reconnection after random delay
                        setTimeout(() => {
                            isOnline = true;
                            document.getElementById('connection-status').classList.remove('offline');
                            document.getElementById('connection-status').innerHTML = '<div class="status-dot"></div><span>CONNECTED</span>';
                            updateTerminalLine('Network connection restored');
                            loadData(); // Refresh data
                        }, 2000 + Math.random() * 5000);
                    }
                }
            }, 5000);
        };

        const checkForUpdates = () => {
            // In a real app, this would check for system updates
            setTimeout(() => {
                if (Math.random() < 0.3) { // 30% chance of "update available"
                    showAlert('System update available (v2.6.0)', 'info');
                    updateTerminalLine('Update check: New version available');
                } else {
                    updateTerminalLine('Update check: System is up to date');
                }
            }, 10000);
        };

        const formatDateTime = (timestamp) => {
            if (!timestamp) return 'Never';
            const date = new Date(timestamp);
            return date.toLocaleString();
        };

        const formatLogDetails = (details) => {
            if (!details) return 'No details';
            if (typeof details === 'string') return details;
            return JSON.stringify(details, null, 2);
        };

        const updateTrend = (elementId, trend) => {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            element.className = 'stat-trend ';
            if (trend > 0) {
                element.classList.add('trend-up');
                element.innerHTML = `<i class="fas fa-caret-up"></i> ${Math.abs(trend).toFixed(1)}%`;
            } else if (trend < 0) {
                element.classList.add('trend-down');
                element.innerHTML = `<i class="fas fa-caret-down"></i> ${Math.abs(trend).toFixed(1)}%`;
            } else {
                element.classList.add('trend-neutral');
                element.innerHTML = `<i class="fas fa-equals"></i> 0.0%`;
            }
        };

        const initializeChart = () => {
            const ctx = document.getElementById('activity-chart').getContext('2d');
            
            activityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array(24).fill().map((_, i) => `${i}:00`),
                    datasets: [
                        {
                            label: 'User Activity',
                            data: Array(24).fill(0),
                            borderColor: 'var(--neon-blue)',
                            backgroundColor: 'rgba(0, 240, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Transactions',
                            data: Array(24).fill(0),
                            borderColor: 'var(--neon-green)',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'var(--terminal-text)',
                                font: {
                                    family: "'Courier New', monospace"
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 240, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--terminal-text)',
                                font: {
                                    family: "'Courier New', monospace"
                                }
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(0, 240, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--terminal-text)',
                                font: {
                                    family: "'Courier New', monospace"
                                }
                            }
                        }
                    }
                }
            });
        };

        const updateChartData = (activityData) => {
            if (!activityChart || !activityData) return;
            
            // Update chart data
            activityChart.data.labels = activityData.hours;
            activityChart.data.datasets[0].data = activityData.userActivity;
            activityChart.data.datasets[1].data = activityData.transactions;
            activityChart.update();
        };

        const resizeChart = () => {
            if (activityChart) {
                activityChart.resize();
            }
        };

        const fetchWithTimeout = (url, options = {}) => {
            const { timeout = 8000, ...fetchOptions } = options;
            
            return new Promise((resolve, reject) => {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    controller.abort();
                    reject(new Error('Request timeout'));
                }, timeout);
                
                fetch(url, { ...fetchOptions, signal: controller.signal })
                    .then(response => {
                        clearTimeout(timeoutId);
                        resolve(response);
                    })
                    .catch(error => {
                        clearTimeout(timeoutId);
                        reject(error);
                    });
            });
        };

        const setupEventListeners = () => {
            // User search
            document.getElementById('user-search').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                filteredUsers = usersData.filter(user => 
                    user.username.toLowerCase().includes(query) || 
                    user.email.toLowerCase().includes(query)
                );
                currentUserPage = 1;
                renderUsers();
            });

            // Log search
            document.getElementById('log-search').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                filteredLogs = logsData.filter(log => 
                    log.action.toLowerCase().includes(query) ||
                    (log.username && log.username.toLowerCase().includes(query)) ||
                    JSON.stringify(log.details).toLowerCase().includes(query)
                );
                currentLogPage = 1;
                renderLogs();
            });

            // Coin rate slider
            document.getElementById('coin-rate').addEventListener('input', (e) => {
                document.getElementById('coin-rate-value').textContent = `${e.target.value}%`;
            });

            // System command input (allow Ctrl+Enter to execute)
            document.getElementById('system-command').addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'Enter') {
                    executeSystemCommand();
                }
            });

            // Window resize
            window.addEventListener('resize', () => {
                resizeChart();
            });

            // Prevent accidental navigation
            window.addEventListener('beforeunload', (e) => {
                if (document.getElementById('add-user-modal').classList.contains('active') ||
                    document.getElementById('edit-user-modal').classList.contains('active') ||
                    document.getElementById('bulk-actions-modal').classList.contains('active')) {
                    e.preventDefault();
                    e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                    return e.returnValue;
                }
            });
        };

        // Initialize system settings
        document.getElementById('coin-rate-value').textContent = '50%';
        document.getElementById('session-token').value = '****************';
    </script>
</body>
</html>
